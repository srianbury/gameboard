(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,a){e.exports=a(86)},52:function(e,t,a){},75:function(e,t){},86:function(e,t,a){"use strict";a.r(t);var n,s=a(0),r=a.n(s),i=a(43),l=a.n(i),c=(a(52),a(1)),o=a(2),u=a(4),m=a(3),d=a(5),h=a(11),p=a(44),g=a.n(p),f="https://gameboard-238222.appspot.com/";var v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={error:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e;e=this.props.gameId,n.emit("get-players",{gameId:e})}},{key:"render",value:function(){var e=this;if(this.state.error)return r.a.createElement(h.a,{to:"/error"});var t=this.props.players||[];return r.a.createElement("div",{id:"lobby-container"},r.a.createElement("h3",null,"Welcome to the Lobby"),r.a.createElement("h5",null,"Currently in the lobby:"),t.map(function(e,a){return r.a.createElement("div",{key:e.id},r.a.createElement("h2",{className:a===t.length-1&&"animated bounceInUp"},e.username))}),this.props.starter&&r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement("h6",{className:"d-flex justify-content-center"},"With great power comes great responsibility"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{onClick:function(){return e.props.startGame("inputQuestions")},className:"btn btn-warning py-2"},"Click this once everyone is in the lobby!"))),r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("img",{src:"https://media.giphy.com/media/26DNhSJnqWFdgPgMo/giphy.gif",alt:"doggo",className:"img-fluid"})))}}]),t}(r.a.Component),y="https://gameboard-238222.appspot.com",E="/api/get/gameId",I="/api/create/newGame",b="/api/create/player",w="/api/create/question",N="/api/create/answer",O="/api/update/scores";var j=function(e){var t=e.status?"text-success":"text-danger",a="text-center py-2";return r.a.createElement("div",null,r.a.createElement("div",{className:a},r.a.createElement("h2",{className:t},e.header)),!e.status&&r.a.createElement("div",{className:a},r.a.createElement("h5",null,e.message)),r.a.createElement("div",{className:a},r.a.createElement("h5",{className:"animated infinite pulse"},"Just waiting on the others :)")),e.image&&r.a.createElement("div",null,r.a.createElement("div",{className:a},r.a.createElement("img",{src:e.image,alt:"gif4u",className:"img-fluid"})),r.a.createElement("p",{className:"text-muted"},r.a.createElement("small",null,"via ",e.author," on ",e.source))))},S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,t.valid=!0,a.setState(t)},a.insertQuestionIntoDb=function(){a.state.question?function(e,t){fetch(y+w,{method:"POST",body:JSON.stringify(e)}).then(function(e){200===e.status?t(!0):t(!1)}).catch(function(){return t(!1)})}({gameId:a.props.gameId,question:a.state.question,userId:a.props.userId},function(e){return a.setState({success:e})}):a.setState({valid:!1})},a.addBlank=function(){var e="______";if(0===a.state.question.length)a.setState({question:e});else{var t=" "===a.state.question.slice(-1)?e:" "+e,n=a.state.question+t;a.setState({question:n})}},a.state={question:"",valid:!0,success:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={gameId:this.props.gameId,userId:this.props.userId};fetch("".concat(y,"/api/isFinished"),{method:"POST",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(t){return t.finished&&e.setState({success:!0})}).catch(function(){return e.setState({success:!1})})}},{key:"render",value:function(){if(null===this.state.success)return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h4",null,"Add a question for everyone to answer")),r.a.createElement("div",null,r.a.createElement("textarea",{id:"question",type:"text",rows:"3",maxLength:"255",value:this.state.question,onChange:this.handleChange,placeholder:"Enter your question",className:this.state.valid?"form-control":"form-control is-invalid",style:{fontWeight:"bold"}}),!this.state.valid&&r.a.createElement("div",{className:"invalid-feedback"},"Gotta add a little bit of text")),r.a.createElement("div",{className:"d-flex justify-content-between py-2"},r.a.createElement("button",{className:"btn btn-info w-50 py-2",onClick:this.insertQuestionIntoDb},"Add question"),r.a.createElement("button",{className:"btn btn-secondary py-2",onClick:this.addBlank},"Add blank")));var e=this.state.success?"Success!":"Whoops...",t=this.state.success?"":"There was an issue adding your question.";return r.a.createElement(j,{status:this.state.success,header:e,message:t,image:"https://media.giphy.com/media/l0MYBzykeuHzLef3G/giphy.gif",author:"Karo Rigaud",source:"GIPHY"})}}]),t}(r.a.Component),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t={};t[e.target.id]=e.target.value,t.valid=!0,a.setState(t)},a.insertAnsIntoDb=function(){a.state.answer?function(e,t){fetch(y+N,{method:"POST",body:JSON.stringify(e)}).then(function(e){200===e.status?t(!0):t(!1)}).catch(function(){return t(!1)})}({gameId:a.props.gameId,answer:a.state.answer,userId:a.props.userId},function(e){return a.setState({success:e})}):a.setState({valid:!1})},a.state={answer:"",valid:!0,success:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={gameId:this.props.gameId,userId:this.props.userId};fetch("".concat(y,"/api/isFinished"),{method:"POST",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(t){return t.finished&&e.setState({success:!0})}).catch(function(){return e.setState({success:!1})})}},{key:"render",value:function(){if(null===this.state.success)return r.a.createElement("div",null,r.a.createElement("div",{className:"pt-1"},r.a.createElement("h4",null,this.props.question)),r.a.createElement("div",{className:"d-flex justify-content-center py-2"},r.a.createElement("textarea",{id:"answer",type:"text",rows:"3",maxLength:"255",value:this.state.answer,onChange:this.handleChange,placeholder:"Enter your answer",className:this.state.valid?"form-control":"form-control is-invalid",style:{fontWeight:"bold"}}),!this.state.valid&&r.a.createElement("div",{className:"invalid-feedback"},"Gotta add a little bit of text")),r.a.createElement("div",{className:"py-2"},r.a.createElement("button",{className:"btn btn-info w-50 py-2",onClick:this.insertAnsIntoDb},"Add your answer!")));var e=this.state.success?"Success!":"Whoops...",t=this.state.success?"":"There was an issue adding your question :(";return r.a.createElement(j,{status:this.state.success,header:e,message:t,image:"https://media.giphy.com/media/3ohzgD1wRxpvpkDCSI/giphy.gif",author:"Chris Gannon",source:"GIPHY"})}}]),t}(r.a.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFaveClick=function(e){!function(e,t){fetch(y+O,{method:"POST",body:JSON.stringify(e)}).then(function(e){200===e.status?t(!0):t(!1)}).catch(function(){return t(!1)})}({gameId:a.props.gameId,userId:e},function(e){return a.setState({success:e})})},a.state={success:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={gameId:this.props.gameId,userId:this.props.userId};fetch("".concat(y,"/api/isFinished"),{method:"POST",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(t){return t.finished&&e.setState({success:!0})}).catch(function(){return e.setState({success:!1})})}},{key:"render",value:function(){var e=this,t=this.props.answers.filter(function(t){return t.owner!==e.props.userId});if(null===this.state.success)return r.a.createElement("div",null,r.a.createElement("h4",{className:"my-2"},this.props.question),r.a.createElement("div",{className:"py-2 w-100"},t.map(function(t){return r.a.createElement("button",{key:t.owner,className:"btn btn-outline-success btn-lg my-2 w-100",onClick:function(){return e.handleFaveClick(t.owner)}},t.answer)})));var a=this.state.success?"Success!":"Whoops...",n=this.state.success?"May the votes be ever in your favor":"There was an issue adding your answer.";return r.a.createElement(j,{status:this.state.success,header:a,message:n,image:"https://media.giphy.com/media/l0HlyONUJlDBrv6iQ/giphy.gif",author:"joelplosz",source:"GIPHY"})}}]),t}(r.a.Component),C=function(e){return r.a.createElement(P,{header:"Nice questions!",body:"Let the games begin."})},q=function(e){return r.a.createElement(P,{header:"Think you're funny?",body:"We will see..."})},G=function(e){return r.a.createElement(P,{header:"Let's see what everyone thought"})},D=function(e){return r.a.createElement(P,{header:"Get ready for the next round",image:"https://media.giphy.com/media/xULW8OB67sl1MTjH32/giphy.gif"})},L=function(e){return r.a.createElement(P,{header:"Calculating the final results",image:"https://media.giphy.com/media/Y6Hj3kY0d8OYw/giphy.gif"})},P=function(e){var t="text-center py-2",a=["bounceOut","bounceOutDown","bounceOutLeft","bounceOutUp","fadeOutUpBig","flipOutX","rotateOutUpLeft","rotateOutUpRight","slideOutUp","slideOutDown","slideOutLeft","slideOutRight","zoomOut","zoomOutUp","zoomOutDown","zoomOutLeft","zoomOutRight","hinge"];return r.a.createElement("div",null,e.header&&r.a.createElement("div",{className:t},r.a.createElement("h2",{className:"animated ".concat(a[Math.floor(Math.random()*a.length)]," delay-2s text-info")},e.header)),e.body&&r.a.createElement("div",{className:t},r.a.createElement("h5",null,e.body)),e.image&&r.a.createElement("div",{className:t},r.a.createElement("img",{src:e.image,alt:"gif4u",className:"img-fluid"})))},M=function(e){var t=e.answers.sort(function(e,t){return parseInt(t.score)-parseInt(e.score)}),a=e.players.sort(function(e,t){return parseInt(t.score)-parseInt(e.score)}),n=["bounceInDown","bounceInLeft","bounceInRight","bounceInUp"];n.length>t.length&&n.splice(t.length);var s=t.length/n.length;return r.a.createElement("div",null,r.a.createElement("h4",{className:"my-2"},e.question),r.a.createElement("div",{className:"my-2 py-2"},r.a.createElement("h6",{className:"text-muted"},"Favorite Answers"),t.map(function(e,a){return r.a.createElement("div",{key:e.owner,className:"animated\n                                                        ".concat(n[Math.floor(a/s)],"\n                                                        delay-").concat(Math.floor((t.length-a-1)/s),"s\n                                                        d-flex justify-content-between my-2")},r.a.createElement("h3",null,e.answer),r.a.createElement("h3",null,e.score))})),r.a.createElement("div",{className:"mt-4 py-2"},r.a.createElement("h6",{className:"text-info"},"Current Standings"),a.map(function(e,a){return r.a.createElement("div",{key:e.id,className:"animated\n                                                    ".concat(n[Math.floor(a/s)],"\n                                                    delay-").concat(Math.floor((t.length-a-1)/s),"s\n                                                    d-flex justify-content-between my-2")},r.a.createElement("h5",{className:"text-success"},e.username),r.a.createElement("h5",{className:"text-success"},e.score))})))},T=function(e){var t=e.players.sort(function(e,t){return parseInt(t.score)-parseInt(e.score)}),a=["bounceInDown","bounceInLeft","bounceInRight","bounceInUp"];a.length>t.length&&a.splice(t.length);var n=t.length/a.length,s=t[0].score,i=t.filter(function(e){return e.score===s}).map(function(e){return e.id});return r.a.createElement("div",null,r.a.createElement("div",{className:"py-2"},r.a.createElement("h4",null,"Final Results!"),t.map(function(e,s){return r.a.createElement("div",{key:e.id,className:"animated\n                                                    ".concat(a[Math.floor(s/n)],"\n                                                    delay-").concat(Math.floor((t.length-s-1)/n),"s\n                                                    d-flex justify-content-between my-2")},r.a.createElement("h3",null,e.username),r.a.createElement("h3",null,e.score))})),r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("h4",null,"Thanks for playing!!")),i.includes(e.userId)&&r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("img",{src:"https://media.giphy.com/media/fdPrizLgIwnc8dHhJR/giphy.gif",alt:"winner",className:"img-fluid"})))},W=function(e){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h3",{className:"text-danger"},e.message?e:"Whoops... Something went wrong"))},A=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t=this.props.playState;return e=t?"inputQuestions"===t?r.a.createElement(S,{gameId:this.props.gameId,userId:this.props.userId}):"afterQuestionIntermission"===t?r.a.createElement(C,null):"answerQuestion"===t?r.a.createElement(k,{gameId:this.props.gameId,question:this.props.question,userId:this.props.userId}):"afterAnswerIntermission"===t?r.a.createElement(q,null):"pickFavoriteAnswer"===t?r.a.createElement(x,{question:this.props.question,gameId:this.props.gameId,userId:this.props.userId,answers:this.props.answers}):"afterPickIntermission"===t?r.a.createElement(G,null):"roundResults"===t?r.a.createElement(M,{question:this.props.question,answers:this.props.answers,players:this.props.players}):"nextRound"===t?r.a.createElement(D,null):"beforeFinalIntermission"===t?r.a.createElement(L,null):r.a.createElement(W,null):r.a.createElement("div",null,r.a.createElement("p",null,"Loading..."),r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading..."))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,this.props.timer)),r.a.createElement("div",null,e))}}]),t}(r.a.Component),J=a(10),R=function(e){return r.a.createElement("div",{className:"text-muted"},r.a.createElement("div",{className:"d-flex justify-content-center p-1",style:{backgroundColor:"#000000"}},r.a.createElement(J.b,{to:"/"},r.a.createElement("h5",{className:"text-muted"},"Gameboard"))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex justify-content-between px-2"},r.a.createElement("div",null,r.a.createElement("h5",null,e.gameId)),r.a.createElement("div",null,r.a.createElement("h5",null,e.username)))))},F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={playAgain:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.playAgain?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex justify-content-end my-2"},r.a.createElement("button",{onClick:function(){return e.setState({playAgain:!0})},className:"btn btn-warning"},"Play again?")),r.a.createElement(T,{userId:this.props.userId,players:this.props.players}))}}]),t}(r.a.Component),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleStart=function(){var e;e=a.props.location.state.gameId,n.emit("start-playing",{gameId:e})},a.state={gameState:null,error:!1,question:null,answers:[],players:[],timer:null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,s,r=this;null!=this.props.location.state&&(e=this.props.location.state.gameId,t=function(e){return r.setState({players:e})},a=function(e){return r.setState({timer:e.currentTime})},s=function(e){return r.setState({gameState:e.currentState,question:e.question,answers:e.answers,players:e.players})},(n=g()(f)).on("list-players",function(e){return t(e)}),n.on("timer",function(e){return a(e)}),n.on("game-state",function(e){s(e)}),n.emit("join-game",{gameId:e}))}},{key:"render",value:function(){var e;if(null==this.props.location.state||this.state.error){var t=window.location.pathname.split("/"),a=t[t.length-1].trim();return r.a.createElement(h.a,{to:{pathname:"/",state:{gameId:a}}})}return e=null===this.state.gameState?r.a.createElement("div",null,r.a.createElement("p",null,"Getting everything ready"),r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):"startLobby"===this.state.gameState?r.a.createElement(v,{players:this.state.players,gameId:this.props.location.state.gameId,starter:this.props.location.state.starter,startGame:this.handleStart}):["inputQuestions","afterQuestionIntermission","answerQuestion","afterAnswerIntermission","pickFavoriteAnswer","afterPickIntermission","roundResults","nextRound","beforeFinalIntermission"].includes(this.state.gameState)?r.a.createElement(A,{question:this.state.question,answers:this.state.answers,players:this.state.players,timer:this.state.timer,playState:this.state.gameState,userId:this.props.location.state.userId,gameId:this.props.location.state.gameId}):"finalResults"===this.state.gameState?r.a.createElement(F,{userId:this.props.location.state.userId,players:this.state.players}):r.a.createElement("div",null,"Hm... Something went wrong..."),r.a.createElement("div",null,r.a.createElement(R,{gameId:this.props.location.state.gameId,username:this.props.location.state.username}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"p-2"},e)))}}]),t}(r.a.Component),z="Gotta have a Game ID",Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getGid=function(){a.state.getGameIdError&&a.setState({getGameIdError:!1}),a.state.new||(a.setState({loadingGameID:!0}),fetch(y+E).then(function(e){return e.json()}).then(function(e){return a.setState({gameId:e.gameId,new:!0,loadingGameID:!1})}).catch(function(){return a.setState({getGameIdError:!0,loadingGameID:!1})}))},a.join=function(){a.setState({getGameIdError:!1}),a.state.new&&a.setState({gameId:"",new:!1})},a.handleChange=function(e){var t={};t[e.target.id]=e.target.value,"gameId"===e.target.id&&(t.gameIdIsInvalid=!1),"username"===e.target.id&&(t.usernameIsInvalid=!1),a.setState(t)},a.startGame=function(){if(""!==a.state.gameId.trim()&&""!==a.state.username.trim()){a.setState({loadingPlay:!0});var e=y+(a.state.new?I:b);fetch(e,{method:"POST",body:JSON.stringify({gameId:a.state.gameId.toLowerCase().trim(),username:a.state.username.trim()})}).then(function(e){return e.json()}).then(function(e){"error"in e?a.setState({gameIdIsInvalid:!0,gIdInvalidMsg:e.error,loadingPlay:!1}):a.setState({userId:e.userId,redirectToPlayarea:!0})}).catch(function(){return a.setState({redirectToPlayarea:!1})})}else a.setState({gameIdIsInvalid:""===a.state.gameId.trim(),usernameIsInvalid:""===a.state.username.trim(),gIdInvalidMsg:z})},a.state={new:!1,gameId:a.props.gameId||"",username:"",redirectToPlayarea:null,gameIdIsInvalid:!1,gIdInvalidMsg:z,usernameIsInvalid:!1,loadingPlay:!1,getGameIdError:!1,loadingGameID:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return null!==this.state.redirectToPlayarea?this.state.redirectToPlayarea?r.a.createElement(h.a,{to:{pathname:"/play/".concat(this.state.gameId.toLowerCase().trim()),state:{username:this.state.username,starter:this.state.new,userId:this.state.userId,gameId:this.state.gameId}}}):r.a.createElement(W,null):r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to gameboard!"),this.state.getGameIdError&&r.a.createElement("p",{className:"text-danger"},"Could not get a new Game ID."),r.a.createElement("div",{className:"d-flex justify-content-between my-3"},r.a.createElement(H,{onClick:this.getGid,className:"btn btn-lg btn-primary"},this.state.loadingGameID?r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):"New Game"),r.a.createElement(H,{onClick:this.join,className:"btn btn-lg btn-primary"},"Join")),r.a.createElement(B,{title:"Game ID",id:"gameId",maxLength:"5",disabled:this.state.new,value:this.state.gameId,onChange:this.handleChange,invalid:this.state.gameIdIsInvalid,invalidMessage:this.state.gIdInvalidMsg}),r.a.createElement(B,{title:"Username",id:"username",maxLength:"31",disabled:!1,value:this.state.username,onChange:this.handleChange,invalid:this.state.usernameIsInvalid,invalidMessage:"Please enter a username"}),r.a.createElement("div",{className:"my-3"},r.a.createElement(H,{onClick:this.startGame,className:"btn btn-warning btn-lg"},this.state.loadingPlay?r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):"Play!")))}}]),t}(r.a.Component),H=function(e){return r.a.createElement("button",{onClick:e.onClick,className:e.className},e.children)},B=function(e){return r.a.createElement("div",{className:"my-2"},r.a.createElement("h5",null,e.title),r.a.createElement("input",{id:e.id,maxLength:e.maxLength,disabled:e.disabled,value:e.value,onChange:e.onChange,autoComplete:"off",className:"form-control ".concat(e.invalid&&"is-invalid"),style:{fontWeight:"bold"}}),e.invalid&&r.a.createElement("div",{className:"invalid-feedback"},e.invalidMessage))},Y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=null==this.props.location.state?null:this.props.location.state.gameId;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{marginTop:"2em"}}),r.a.createElement(Q,{gameId:e}))}}]),t}(s.Component),_=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(J.a,null,r.a.createElement(h.b,{path:"/",exact:!0,component:Y}),r.a.createElement(h.b,{path:"/play/:gameId",component:U}),r.a.createElement(h.b,{path:"/error",component:W}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.a0d57995.chunk.js.map